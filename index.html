<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How RAG Works</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 20px;
      background: #f9f9f9;
      color: #333;
    }
    h1, h2 {
      text-align: center;
      color: #222;
    }
    .diagram {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }
    svg {
      background: white;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 20px;
    }
    ol {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    li {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>Diagram: How RAG Works</h1>

  <div class="diagram">
    <svg width="900" height="450">
      <!-- User -->
      <rect x="30" y="150" width="120" height="50" fill="#cce5ff" stroke="#333" rx="10"/>
      <text x="90" y="180" text-anchor="middle" alignment-baseline="middle">User Query</text>

      <!-- Arrow to Embedder -->
      <line x1="150" y1="175" x2="230" y2="175" stroke="#333" marker-end="url(#arrow)"/>

      <!-- Embedder -->
      <rect x="230" y="150" width="140" height="50" fill="#e2e3e5" stroke="#333" rx="10"/>
      <text x="300" y="175" text-anchor="middle" alignment-baseline="middle">Embedder</text>

      <!-- Arrow to Retriever -->
      <line x1="370" y1="175" x2="450" y2="175" stroke="#333" marker-end="url(#arrow)"/>

      <!-- Retriever -->
      <rect x="450" y="150" width="180" height="50" fill="#d4edda" stroke="#333" rx="10"/>
      <text x="540" y="175" text-anchor="middle" alignment-baseline="middle">Retriever (Elasticsearch)</text>

      <!-- Arrow to Knowledge Base -->
      <line x1="530" y1="150" x2="530" y2="100" stroke="#333" marker-end="url(#arrow)"/>

      <!-- Knowledge Base -->
      <rect x="450" y="50" width="160" height="50" fill="#fff3cd" stroke="#333" rx="10"/>
      <text x="530" y="75" text-anchor="middle" alignment-baseline="middle">Knowledge Base</text>

      <!-- Arrow to Prompt Builder -->
      <line x1="610" y1="175" x2="700" y2="175" stroke="#333" marker-end="url(#arrow)"/>

      <!-- Prompt Builder -->
      <rect x="700" y="150" width="150" height="50" fill="#f8d7da" stroke="#333" rx="10"/>
      <text x="775" y="175" text-anchor="middle" alignment-baseline="middle">Prompt Builder</text>

      <!-- Arrow to LLM -->
      <line x1="775" y1="200" x2="775" y2="260" stroke="#333" marker-end="url(#arrow)"/>

      <!-- LLM -->
      <rect x="700" y="260" width="150" height="50" fill="#e2e3e5" stroke="#333" rx="10"/>
      <text x="775" y="285" text-anchor="middle" alignment-baseline="middle">LLM</text>

      <!-- Arrow to Final Answer -->
      <line x1="775" y1="310" x2="775" y2="370" stroke="#333" marker-end="url(#arrow)"/>

      <!-- Final Answer -->
      <rect x="700" y="370" width="150" height="50" fill="#cce5ff" stroke="#333" rx="10"/>
      <text x="775" y="395" text-anchor="middle" alignment-baseline="middle">Final Answer</text>

      <!-- Arrowhead -->
      <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L9,3 z" fill="#333" />
        </marker>
      </defs>
    </svg>
  </div>

  <h2>Workflow Steps</h2>
  <ol>
    <li>User Query:</strong>User Query → You ask: “Who discovered gravity?”</li>
    
    <li>Embedder → Turns your question into numbers (a vector) so the computer understands meaning.</li>
    
    <li>Retriever (Elasticsearch) → Searches the knowledge base and finds documents that mention Isaac Newton and gravity.
</li>
    
    <li>trong>Knowledge Base → Stores these documents (e.g., Wikipedia articles, textbooks).</li>
    
    <li>Prompt Builder → Combines your question + the retrieved text into a single package.
    Example: “Question: Who discovered gravity? Context: Isaac Newton developed the theory of gravity in the 17th century…”</li>
    
    <li>LLM → Reads the question with the context and generates an answer.
</li>

    <li>Final Answer → You receive: “Gravity was discovered by Sir Isaac Newton in the 17th century.”</li>
  </ol>

</body>
</html>

